@import url('https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Inter:wght@400;600&family=JetBrains+Mono:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-disco-bg text-disco-paper font-sans overflow-hidden;
    /* Reduced scanline intensity for better readability */
    background-image: repeating-linear-gradient(0deg, transparent, transparent 1px, #00000005 1px, #00000005 2px);
    background-size: 100% 4px;
  }

  /* Scrollbar customization */
  ::-webkit-scrollbar {
    width: 6px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-disco-bg;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-disco-muted rounded-full;
  }
}

@layer components {
  .btn-disco {
    @apply px-4 py-2 bg-transparent border-2 border-disco-paper text-disco-paper font-serif font-bold tracking-wider hover:bg-disco-paper hover:text-disco-bg transition-colors duration-200 shadow-hard uppercase;
  }

  .panel-glass {
    @apply bg-disco-panel border border-disco-muted/20 backdrop-blur-sm shadow-xl;
  }

  .text-glow {
    text-shadow: 0 0 8px currentColor;
  }

  .text-outline {
    text-shadow: 1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;
  }

  .fade-in {
    animation: fadeIn 0.8s ease-in-out;
  }

  /* Fast fadeIn for tooltips and hover cards */
  .animate-fadeIn {
    animation: fadeInFast 0.15s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeInFast {
    from {
      opacity: 0;
      transform: translateY(4px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Typewriter cursor blink */
  .typewriter-cursor {
    animation: blink 1s step-end infinite;
  }

  @keyframes blink {

    0%,
    100% {
      opacity: 1;
    }

    50% {
      opacity: 0;
    }
  }

  /* Toast slide in */
  .animate-slideIn {
    animation: slideIn 0.3s ease-out;
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(100px);
    }

    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Screen shake variations */
  .shake-light {
    animation: shakeLight 0.2s ease-in-out;
  }

  .shake-medium {
    animation: shakeMedium 0.3s ease-in-out;
  }

  .shake-heavy {
    animation: shakeHeavy 0.5s ease-in-out;
  }

  @keyframes shakeLight {

    0%,
    100% {
      transform: translateX(0);
    }

    25% {
      transform: translateX(-1px) rotate(-0.2deg);
    }

    75% {
      transform: translateX(1px) rotate(0.2deg);
    }
  }

  @keyframes shakeMedium {

    0%,
    100% {
      transform: translateX(0);
    }

    10% {
      transform: translateX(-3px) rotate(-0.5deg);
    }

    30% {
      transform: translateX(3px) rotate(0.5deg);
    }

    50% {
      transform: translateX(-2px) rotate(-0.3deg);
    }

    70% {
      transform: translateX(2px) rotate(0.3deg);
    }

    90% {
      transform: translateX(-1px);
    }
  }

  @keyframes shakeHeavy {

    0%,
    100% {
      transform: translateX(0);
    }

    10% {
      transform: translateX(-6px) translateY(2px) rotate(-1deg);
    }

    20% {
      transform: translateX(6px) translateY(-2px) rotate(1deg);
    }

    30% {
      transform: translateX(-5px) translateY(1px) rotate(-0.8deg);
    }

    40% {
      transform: translateX(5px) translateY(-1px) rotate(0.8deg);
    }

    50% {
      transform: translateX(-4px) rotate(-0.5deg);
    }

    60% {
      transform: translateX(4px) rotate(0.5deg);
    }

    70% {
      transform: translateX(-2px);
    }

    80% {
      transform: translateX(2px);
    }

    90% {
      transform: translateX(-1px);
    }
  }

  /* Tension pulse for vignette */
  @keyframes tensionPulse {

    0%,
    100% {
      opacity: 0.8;
    }

    50% {
      opacity: 1;
    }
  }

  /* Floating particles */
  .animate-float {
    animation: float linear infinite;
  }

  @keyframes float {
    0% {
      transform: translateY(100vh) translateX(0);
      opacity: 0;
    }

    10% {
      opacity: 1;
    }

    90% {
      opacity: 1;
    }

    100% {
      transform: translateY(-10vh) translateX(20px);
      opacity: 0;
    }
  }

  /* Ripple effect for momentum burst */
  .animate-ripple {
    animation: ripple 1s ease-out forwards;
  }

  @keyframes ripple {
    0% {
      transform: scale(0);
      opacity: 1;
    }

    100% {
      transform: scale(4);
      opacity: 0;
    }
  }

  /* Ken Burns effect - slow zoom/pan for scene images */
  .animate-kenburns {
    animation: kenburns 30s ease-in-out infinite alternate;
  }

  @keyframes kenburns {
    0% {
      transform: scale(1) translate(0, 0);
    }

    100% {
      transform: scale(1.1) translate(-2%, -1%);
    }
  }

  /* Flicker for hijack effect */
  .animate-flicker {
    animation: flicker 0.15s linear infinite;
  }

  @keyframes flicker {

    0%,
    100% {
      opacity: 1;
    }

    50% {
      opacity: 0.7;
    }

    75% {
      opacity: 0.9;
    }
  }

  /* Glitch lines */
  .animate-glitch {
    animation: glitch 0.3s linear infinite alternate;
  }

  @keyframes glitch {
    0% {
      transform: translateX(0);
    }

    100% {
      transform: translateX(10px);
    }
  }

  /* Static noise animation */
  .animate-static {
    animation: static 0.1s steps(10) infinite;
  }

  @keyframes static {

    0%,
    100% {
      background-position: 0 0;
    }

    50% {
      background-position: 100% 100%;
    }
  }

  /* Smooth scroll */
  .scroll-smooth {
    scroll-behavior: smooth;
  }

  /* Dice tumble animation - Enhanced 3D */
  .animate-tumble {
    animation: tumble 1.5s ease-out;
    transform-style: preserve-3d;
    perspective: 1000px;
  }

  @keyframes tumble {
    0% {
      transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(0.5) translateY(-20px);
      opacity: 0;
      filter: blur(4px);
    }

    15% {
      transform: rotateX(180deg) rotateY(90deg) rotateZ(45deg) scale(1.3) translateY(10px);
      opacity: 1;
      filter: blur(0px);
    }

    30% {
      transform: rotateX(360deg) rotateY(180deg) rotateZ(90deg) scale(1) translateY(-5px);
    }

    45% {
      transform: rotateX(540deg) rotateY(270deg) rotateZ(135deg) scale(1.15) translateY(5px);
    }

    60% {
      transform: rotateX(680deg) rotateY(340deg) rotateZ(160deg) scale(1) translateY(-3px);
    }

    75% {
      transform: rotateX(700deg) rotateY(350deg) rotateZ(175deg) scale(1.05) translateY(2px);
    }

    90% {
      transform: rotateX(715deg) rotateY(358deg) rotateZ(178deg) scale(1) translateY(-1px);
    }

    100% {
      transform: rotateX(720deg) rotateY(360deg) rotateZ(180deg) scale(1) translateY(0px);
    }
  }

  /* Dice bounce landing */
  .animate-dice-land {
    animation: diceLand 0.3s ease-out;
  }

  @keyframes diceLand {
    0% {
      transform: translateY(0);
    }

    40% {
      transform: translateY(-8px);
    }

    70% {
      transform: translateY(2px);
    }

    100% {
      transform: translateY(0);
    }
  }

  /* Dice glow on result */
  .dice-glow-hit {
    animation: diceGlowHit 0.5s ease-out;
    box-shadow: 0 0 20px rgba(107, 228, 227, 0.8), 0 0 40px rgba(107, 228, 227, 0.4);
  }

  .dice-glow-miss {
    animation: diceGlowMiss 0.5s ease-out;
    box-shadow: 0 0 20px rgba(185, 63, 63, 0.8), 0 0 40px rgba(185, 63, 63, 0.4);
  }

  @keyframes diceGlowHit {
    0% {
      box-shadow: 0 0 0 rgba(107, 228, 227, 0);
    }

    50% {
      box-shadow: 0 0 30px rgba(107, 228, 227, 1), 0 0 60px rgba(107, 228, 227, 0.6);
    }

    100% {
      box-shadow: 0 0 20px rgba(107, 228, 227, 0.8), 0 0 40px rgba(107, 228, 227, 0.4);
    }
  }

  @keyframes diceGlowMiss {
    0% {
      box-shadow: 0 0 0 rgba(185, 63, 63, 0);
    }

    50% {
      box-shadow: 0 0 30px rgba(185, 63, 63, 1), 0 0 60px rgba(185, 63, 63, 0.6);
    }

    100% {
      box-shadow: 0 0 20px rgba(185, 63, 63, 0.8), 0 0 40px rgba(185, 63, 63, 0.4);
    }
  }

  /* Dice shake anticipation */
  .animate-dice-shake {
    animation: diceShake 0.4s ease-in-out;
  }

  @keyframes diceShake {

    0%,
    100% {
      transform: translateX(0) rotate(0deg);
    }

    20% {
      transform: translateX(-3px) rotate(-2deg);
    }

    40% {
      transform: translateX(3px) rotate(2deg);
    }

    60% {
      transform: translateX(-2px) rotate(-1deg);
    }

    80% {
      transform: translateX(2px) rotate(1deg);
    }
  }

  /* Result flash effects */
  .flash-success {
    animation: flashSuccess 0.5s ease-out;
  }

  .flash-danger {
    animation: flashDanger 0.5s ease-out;
  }

  @keyframes flashSuccess {
    0% {
      box-shadow: 0 0 0 0 rgba(107, 228, 227, 0.7);
    }

    50% {
      box-shadow: 0 0 30px 10px rgba(107, 228, 227, 0.4);
    }

    100% {
      box-shadow: 0 0 0 0 rgba(107, 228, 227, 0);
    }
  }

  @keyframes flashDanger {
    0% {
      box-shadow: 0 0 0 0 rgba(185, 63, 63, 0.7);
    }

    50% {
      box-shadow: 0 0 30px 10px rgba(185, 63, 63, 0.4);
    }

    100% {
      box-shadow: 0 0 0 0 rgba(185, 63, 63, 0);
    }
  }

  /* Loading text animation */
  .loading-text {
    animation: loadingPulse 2s ease-in-out infinite;
  }

  @keyframes loadingPulse {

    0%,
    100% {
      opacity: 0.5;
    }

    50% {
      opacity: 1;
    }
  }

  /* Grid scroll animation for HUD background */
  @keyframes gridScroll {
    0% {
      background-position: 0 0;
    }

    100% {
      background-position: 20px 20px;
    }
  }

  /* CRT flicker effect - very subtle */
  @keyframes crtFlicker {

    0%,
    100% {
      opacity: 1;
    }

    50% {
      opacity: 0.98;
    }
  }

  /* Input glow pulse */
  @keyframes inputPulse {

    0%,
    100% {
      box-shadow: 0 0 5px rgba(212, 93, 53, 0.3), 0 0 0 1px rgba(212, 93, 53, 0.2);
    }

    50% {
      box-shadow: 0 0 15px rgba(212, 93, 53, 0.6), 0 0 0 1px rgba(212, 93, 53, 0.4);
    }
  }

  /* Weather Effects */
  .animate-rain {
    animation: rain linear infinite;
  }

  @keyframes rain {
    0% {
      transform: translateY(0);
      opacity: 0;
    }

    10% {
      opacity: 0.6;
    }

    90% {
      opacity: 0.6;
    }

    100% {
      transform: translateY(100vh);
      opacity: 0;
    }
  }

  .animate-snow {
    animation: snow linear infinite;
  }

  @keyframes snow {
    0% {
      transform: translateY(0) translateX(0);
      opacity: 0;
    }

    10% {
      opacity: 0.8;
    }

    90% {
      opacity: 0.8;
    }

    100% {
      transform: translateY(100vh) translateX(20px);
      opacity: 0;
    }
  }

  .animate-dust {
    animation: dust ease-in-out infinite;
  }

  @keyframes dust {
    0% {
      transform: translate(0, 0);
      opacity: 0.3;
    }

    50% {
      transform: translate(30px, -20px);
      opacity: 0.6;
    }

    100% {
      transform: translate(60px, 0);
      opacity: 0.3;
    }
  }

  .animate-lightning {
    animation: lightning 4s ease-in-out infinite;
  }

  @keyframes lightning {

    0%,
    90%,
    100% {
      background: transparent;
    }

    91% {
      background: rgba(255, 255, 255, 0.3);
    }

    92% {
      background: transparent;
    }

    93% {
      background: rgba(255, 255, 255, 0.5);
    }

    94% {
      background: transparent;
    }
  }
}

/* Accessibility: Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Disable specific animations */
  .animate-pulse,
  .animate-spin,
  .animate-bounce,
  .animate-tumble,
  .animate-kenburns,
  .animate-flicker,
  .animate-glitch,
  .loading-text {
    animation: none !important;
  }

  /* Disable typewriter cursor blink */
  .typewriter-cursor {
    animation: none !important;
    opacity: 1 !important;
  }
}

/* High Contrast Mode - Enhanced Accessibility */
.high-contrast {
  --disco-bg: #000000;
  --disco-paper: #FFFFFF;
  --disco-panel: #1a1a1a;
  --disco-dark: #0a0a0a;
  --disco-accent: #FFFF00;
  --disco-cyan: #00FFFF;
  --disco-red: #FF4444;
  --disco-yellow: #FFFF00;
  --disco-purple: #FF00FF;
  --disco-muted: #888888;
}

.high-contrast * {
  text-shadow: none !important;
}

.high-contrast body {
  background: #000000 !important;
  background-image: none !important;
}

/* High contrast borders */
.high-contrast .border,
.high-contrast [class*="border-"] {
  border-color: #FFFFFF !important;
  border-width: 2px !important;
}

/* High contrast buttons */
.high-contrast button,
.high-contrast .btn-disco {
  border: 2px solid #FFFFFF !important;
  background: #000000 !important;
  color: #FFFFFF !important;
}

.high-contrast button:hover,
.high-contrast .btn-disco:hover {
  background: #FFFFFF !important;
  color: #000000 !important;
}

/* High contrast inputs */
.high-contrast input,
.high-contrast textarea {
  border: 2px solid #FFFFFF !important;
  background: #000000 !important;
  color: #FFFFFF !important;
}

.high-contrast input:focus,
.high-contrast textarea:focus {
  border-color: #00FFFF !important;
  outline: 2px solid #00FFFF !important;
}

/* High contrast links */
.high-contrast a {
  color: #00FFFF !important;
  text-decoration: underline !important;
}

/* High contrast progress bars */
.high-contrast [class*="bg-disco-"] {
  border: 1px solid #FFFFFF;
}

/* High contrast status colors - more saturated */
.high-contrast .text-disco-cyan {
  color: #00FFFF !important;
}

.high-contrast .text-disco-red {
  color: #FF4444 !important;
}

.high-contrast .text-disco-yellow {
  color: #FFFF00 !important;
}

/* High contrast focus indicators */
.high-contrast *:focus {
  outline: 3px solid #FFFF00 !important;
  outline-offset: 2px !important;
}

/* Remove gradients and transparency in high contrast */
.high-contrast [class*="bg-gradient"],
.high-contrast [class*="backdrop-blur"] {
  background: #1a1a1a !important;
  backdrop-filter: none !important;
}

/* High contrast animations - reduce motion */
.high-contrast .animate-pulse,
.high-contrast .animate-kenburns {
  animation: none !important;
}

/* Ensure text is readable */
.high-contrast .text-disco-muted {
  color: #AAAAAA !important;
}

/* Dyslexia-friendly font option */
.dyslexia-friendly {
  font-family: 'OpenDyslexic', 'Comic Sans MS', sans-serif !important;
  letter-spacing: 0.05em;
  word-spacing: 0.1em;
  line-height: 1.8;
}

/* Large text mode */
.large-text {
  font-size: 120% !important;
}

.large-text h1 {
  font-size: 2.5rem !important;
}

.large-text h2 {
  font-size: 2rem !important;
}

.large-text h3 {
  font-size: 1.75rem !important;
}

.large-text p,
.large-text span {
  font-size: 1.25rem !important;
}